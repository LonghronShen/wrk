# This file sets the basic flags for the LUAJIT compiler
if(NOT CMAKE_LUAJIT_COMPILE_OBJECT)
    get_filename_component(LUAJIT_COMPILER_DIR ${CMAKE_LUAJIT_COMPILER} DIRECTORY)
    get_filename_component(LUAJIT_COMPILER_EXE ${CMAKE_LUAJIT_COMPILER} NAME)
    if(NOT WIN32)
        set(CMAKE_LUAJIT_COMPILE_OBJECT "cd \"${LUAJIT_COMPILER_DIR}\" && \"./${LUAJIT_COMPILER_EXE}\" -b \"<SOURCE>\" \"${CMAKE_BINARY_DIR}/<OBJECT>\"")
    else()
        set(CMAKE_LUAJIT_COMPILE_OBJECT "\"${CMAKE_LUAJIT_COMPILER}\" -b \"<SOURCE>\" \"${CMAKE_BINARY_DIR}/<OBJECT>\"")
    endif()
endif()
if(NOT CMAKE_LUAJIT_LINK_EXECUTABLE)
    set(CMAKE_LUAJIT_LINK_EXECUTABLE "${CMAKE_C_LINK_EXECUTABLE}")
    set(CMAKE_LUAJIT_CREATE_SHARED_LIBRARY "${CMAKE_C_CREATE_SHARED_LIBRARY}")
    set(CMAKE_LUAJIT_CREATE_SHARED_MODULE "${CMAKE_C_CREATE_SHARED_MODULE}")
    set(CMAKE_LUAJIT_CREATE_STATIC_LIBRARY "${CMAKE_C_CREATE_STATIC_LIBRARY}")
    # message(STATUS "Setting luajit linker:")
    # message(STATUS "-- CMAKE_LUAJIT_LINK_EXECUTABLE: ${CMAKE_LUAJIT_LINK_EXECUTABLE}\n")
    # message(STATUS "-- CMAKE_LUAJIT_CREATE_SHARED_LIBRARY: ${CMAKE_LUAJIT_CREATE_SHARED_LIBRARY}\n")
    # message(STATUS "-- CMAKE_LUAJIT_CREATE_SHARED_MODULE: ${CMAKE_LUAJIT_CREATE_SHARED_MODULE}\n")
    # message(STATUS "-- CMAKE_LUAJIT_CREATE_STATIC_LIBRARY: ${CMAKE_LUAJIT_CREATE_STATIC_LIBRARY}\n")
endif()
set(CMAKE_LUAJIT_INFORMATION_LOADED 1)